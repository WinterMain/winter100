---
layout: question
title:  Webpack不排除node_modules
date:   2020-03-23T06:34:55.000Z
description: 我正在将webpack用于要构建的Node框架（尽管我应该应该使用gulp）。当我包含EJS模块时，即使我明确告诉它要排除node_modules目录，w...
img: 
author: 达蒙
category: question
answer: 3
tags: JavaScript Webpack
topic: Webpack
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我正在将webpack用于要构建的Node框架（尽管我应该应该使用gulp）。</font><font style="vertical-align: inherit;">当我包含EJS模块时，即使我明确告诉它要排除node_modules目录，webpack也会将其包含在已编译的源代码中。</font></font></p>

<pre><code>module.exports = {<font></font>
    context: __dirname,<font></font>
    target: 'node',<font></font>
    // ...<font></font>
    output: {<font></font>
        libraryTarget: 'commonjs'<font></font>
        // ...<font></font>
    },<font></font>
    module: {<font></font>
        loaders: [<font></font>
            {<font></font>
                test: /\.js$/,<font></font>
                exclude: /node_modules/,<font></font>
                loader: 'babel-loader?{ "stage": 0, "optional": ["runtime"] }'<font></font>
            }<font></font>
        ]<font></font>
    }<font></font>
};<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如您所见，我对JS文件进行了测试，并告诉它排除了node_modules。</font><font style="vertical-align: inherit;">为什么忽略我的排除？</font></font></p></div>
    {% endraw %}
  </div>
  <p class="winter_mark">第2845篇《Webpack不排除node_modules》来自Winter(https://github.com/aiyld/aiyld.github.io)的站点</p>
  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-list">
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">JinJin神奇</span>
            <span class="discuss-time">2020.03.23</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您在使用时 TypeScript跑进这个问题，你可能需要添加</font></font><code>skipLibCheck: true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在你的</font></font><code>tsconfig.json</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件中。</font></font></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">A樱</span>
            <span class="discuss-time">2020.03.23</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试使用绝对路径：</font></font></p>

<pre><code>exclude:path.resolve(__dirname, "node_modules")
</code></pre></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">番长</span>
            <span class="discuss-time">2020.03.23</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这为我工作： </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排除：[/ bower_components /，/ node_modules /]</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模块加载器</font></font></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一系列自动应用的加载程序。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个项目都可以具有以下属性：</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">测试：必须满足的条件</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">排除：不得满足的条件</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括：必须满足的条件</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">loader：字符串“！” </font><font style="vertical-align: inherit;">分开的装载机</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">装载程序：字符串形式的装载程序数组</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件可以是RegExp，绝对路径开始或其中之一与“ and”组合的数组。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参见</font></font><a href="https://webpack.github.io/docs/configuration.html#module-loaders" rel="nofollow noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://webpack.github.io/docs/configuration.html#module-loaders</font></font></a></p></div>
        </div></div>
    </div>
    {% endraw %}
  </div>
<div>
