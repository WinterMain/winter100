---
layout: question
title:  如何从列表列表中制作平面列表？
date:   2020-05-28T07:10:38.000Z
description: 我想知道是否有捷径可以从Python的列表清单中做出一个简单的清单。我可以for循环执行此操作，但也许有一些很酷的“单线”功能？我尝试使用reduce...
img: 
author: 番长猴子
category: question
answer: 11
tags: Python
topic: Python
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我想知道是否有捷径可以从Python的列表清单中做出一个简单的清单。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我可以</font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">循环</font><font style="vertical-align: inherit;">执行此操作</font><font style="vertical-align: inherit;">，但也许有一些很酷的“单线”功能？</font><font style="vertical-align: inherit;">我尝试使用</font></font><code>reduce()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但出现错误。</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">码</font></font></strong></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">l </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
reduce</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">:</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">extend</span><span class="pun">(</span><span class="pln">y</span><span class="pun">),</span><span class="pln"> l</span><span class="pun">)</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误信息</font></font></strong></p>

<pre class="lang-none prettyprint prettyprinted" style=""><code><span class="pln">Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "&lt;stdin&gt;", line 1, in &lt;lambda&gt;
AttributeError: 'NoneType' object has no attribute 'extend'</span></code></pre></div>
    {% endraw %}
  </div>
  <p style="height: 0;width:0;overflow: hidden;"> 第4223篇《如何从列表列表中制作平面列表？》来自Winter(https://github.com/aiyld/aiyld.github.io)的站点</p>
  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">启人</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><code>matplotlib.cbook.flatten()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 即使嵌套列表比示例嵌套更深，它也适用于嵌套列表。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> matplotlib
l </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">list</span><span class="pun">(</span><span class="pln">matplotlib</span><span class="pun">.</span><span class="pln">cbook</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">)))</span><span class="pln">
l2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[</span><span class="lit">13</span><span class="pun">]]]]]</span><span class="pln">
</span><span class="kwd">print</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">matplotlib</span><span class="pun">.</span><span class="pln">cbook</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l2</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这比下划线._。flatten快18倍：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="typ">Average</span><span class="pln"> time over </span><span class="lit">1000</span><span class="pln"> trials of matplotlib</span><span class="pun">.</span><span class="pln">cbook</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2.55e-05</span><span class="pln"> sec
</span><span class="typ">Average</span><span class="pln"> time over </span><span class="lit">1000</span><span class="pln"> trials of underscore</span><span class="pun">.</span><span class="pln">_</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4.63e-04</span><span class="pln"> sec
</span><span class="pun">(</span><span class="pln">time </span><span class="kwd">for</span><span class="pln"> underscore</span><span class="pun">.</span><span class="pln">_</span><span class="pun">)/(</span><span class="pln">time </span><span class="kwd">for</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">cbook</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">18.1233394636</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">别太浪</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">考虑安装</font></font><a href="https://github.com/erikrose/more-itertools" rel="noreferrer"><code>more_itertools</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">软件包。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;</span><span class="pln"> pip install more_itertools</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它附带了一个实现</font></font><a href="https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.flatten" rel="noreferrer"><code>flatten</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://more-itertools.readthedocs.io/en/stable/_modules/more_itertools/recipes.html#flatten" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，来自</font></font><a href="https://docs.python.org/3/library/itertools.html#itertools-recipes" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">itertools配方</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> more_itertools


lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
list</span><span class="pun">(</span><span class="pln">more_itertools</span><span class="pun">.</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">lst</span><span class="pun">))</span><span class="pln">
</span><span class="com"># [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从2.4版开始，您可以使用</font></font><a href="https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.collapse" rel="noreferrer"><code>more_itertools.collapse</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><a href="https://more-itertools.readthedocs.io/en/stable/_modules/more_itertools/more.html#collapse" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">source</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，由abarnet贡献）</font><font style="vertical-align: inherit;">展平更复杂，嵌套的可迭代</font><font style="vertical-align: inherit;">对象。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
list</span><span class="pun">(</span><span class="pln">more_itertools</span><span class="pun">.</span><span class="pln">collapse</span><span class="pun">(</span><span class="pln">lst</span><span class="pun">))</span><span class="pln"> 
</span><span class="com"># [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><span class="pln">

lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]],</span><span class="pln"> </span><span class="pun">[[[</span><span class="lit">7</span><span class="pun">]]],</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">              </span><span class="com"># complex nesting</span><span class="pln">
list</span><span class="pun">(</span><span class="pln">more_itertools</span><span class="pun">.</span><span class="pln">collapse</span><span class="pun">(</span><span class="pln">lst</span><span class="pun">))</span><span class="pln">
</span><span class="com"># [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">蛋蛋</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">递归版本</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,[</span><span class="lit">3</span><span class="pun">,</span><span class="lit">4</span><span class="pun">],[</span><span class="lit">5</span><span class="pun">,[</span><span class="lit">6</span><span class="pun">,[</span><span class="lit">7</span><span class="pun">]]],</span><span class="lit">8</span><span class="pun">,</span><span class="lit">9</span><span class="pun">,[</span><span class="lit">10</span><span class="pun">]]</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> flatten_list</span><span class="pun">(</span><span class="pln">k</span><span class="pun">):</span><span class="pln">
    result </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> k</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> isinstance</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln">list</span><span class="pun">):</span><span class="pln">

            </span><span class="com">#The isinstance() function checks if the object (first argument) is an </span><span class="pln">
            </span><span class="com">#instance or subclass of classinfo class (second argument)</span><span class="pln">

            result</span><span class="pun">.</span><span class="pln">extend</span><span class="pun">(</span><span class="pln">flatten_list</span><span class="pun">(</span><span class="pln">i</span><span class="pun">))</span><span class="pln"> </span><span class="com">#Recursive call</span><span class="pln">
        </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
            result</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> result

flatten_list</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
</span><span class="com">#result = [1,2,3,4,5,6,7,8,9,10]</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">飞云</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我使用</font></font><a href="https://github.com/nschloe/perfplot" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">perfplot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（我的一个宠物项目，本质上是一个包装纸</font></font><code>timeit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">测试了大多数建议的解决方案</font><font style="vertical-align: inherit;">，然后发现</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">functools</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">iconcat</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">串联多个小列表和几个长列表时，这是最快的解决方案。</font><font style="vertical-align: inherit;">（</font></font><code>operator.iadd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样快。）</font></font></p>

<p><a href="https://i.stack.imgur.com/Yqu9I.png" rel="noreferrer"><img src="https://i.stack.imgur.com/Yqu9I.png" alt="在此处输入图片说明"></a></p>

<p><a href="https://i.stack.imgur.com/b0JFU.png" rel="noreferrer"><img src="https://i.stack.imgur.com/b0JFU.png" alt="在此处输入图片说明"></a></p>

<hr>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制剧情的代码：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> functools
</span><span class="kwd">import</span><span class="pln"> itertools
</span><span class="kwd">import</span><span class="pln"> numpy
</span><span class="kwd">import</span><span class="pln"> operator
</span><span class="kwd">import</span><span class="pln"> perfplot


</span><span class="kwd">def</span><span class="pln"> forfor</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">[</span><span class="pln">item </span><span class="kwd">for</span><span class="pln"> sublist </span><span class="kwd">in</span><span class="pln"> a </span><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> sublist</span><span class="pun">]</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> sum_brackets</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> functools_reduce</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> functools</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">)</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> functools_reduce_iconcat</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> functools</span><span class="pun">.</span><span class="pln">reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">iconcat</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> itertools_chain</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">itertools</span><span class="pun">.</span><span class="pln">chain</span><span class="pun">.</span><span class="pln">from_iterable</span><span class="pun">(</span><span class="pln">a</span><span class="pun">))</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> numpy_flat</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">numpy</span><span class="pun">.</span><span class="pln">array</span><span class="pun">(</span><span class="pln">a</span><span class="pun">).</span><span class="pln">flat</span><span class="pun">)</span><span class="pln">


</span><span class="kwd">def</span><span class="pln"> numpy_concatenate</span><span class="pun">(</span><span class="pln">a</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">numpy</span><span class="pun">.</span><span class="pln">concatenate</span><span class="pun">(</span><span class="pln">a</span><span class="pun">))</span><span class="pln">


perfplot</span><span class="pun">.</span><span class="pln">show</span><span class="pun">(</span><span class="pln">
    setup</span><span class="pun">=</span><span class="kwd">lambda</span><span class="pln"> n</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">list</span><span class="pun">(</span><span class="pln">range</span><span class="pun">(</span><span class="lit">10</span><span class="pun">))]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> n</span><span class="pun">,</span><span class="pln">
    </span><span class="com"># setup=lambda n: [list(range(n))] * 10,</span><span class="pln">
    kernels</span><span class="pun">=[</span><span class="pln">
        forfor</span><span class="pun">,</span><span class="pln">
        sum_brackets</span><span class="pun">,</span><span class="pln">
        functools_reduce</span><span class="pun">,</span><span class="pln">
        functools_reduce_iconcat</span><span class="pun">,</span><span class="pln">
        itertools_chain</span><span class="pun">,</span><span class="pln">
        numpy_flat</span><span class="pun">,</span><span class="pln">
        numpy_concatenate</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">],</span><span class="pln">
    n_range</span><span class="pun">=[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">**</span><span class="pln"> k </span><span class="kwd">for</span><span class="pln"> k </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">16</span><span class="pun">)],</span><span class="pln">
    xlabel</span><span class="pun">=</span><span class="str">"num lists (of length 10)"</span><span class="pun">,</span><span class="pln">
    </span><span class="com"># xlabel="len lists (10 lists total)"</span><span class="pln">
</span><span class="pun">)</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">别太浪</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的函数不起作用的原因是因为</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展名</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">扩展了数组就位并且不返回它。</font><font style="vertical-align: inherit;">您仍然可以使用以下方法从lambda返回x：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">reduce</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">:</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">extend</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意：扩展比列表上的+更有效。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">神无</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为什么使用扩展？</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">reduce</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">:</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这应该工作正常。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">飞羽</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">from</span><span class="pln"> functools </span><span class="kwd">import</span><span class="pln"> reduce </span><span class="com">#python 3</span><span class="pln">

</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">],[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> reduce</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">:</span><span class="pln"> x</span><span class="pun">+</span><span class="pln">y</span><span class="pun">,</span><span class="pln">l</span><span class="pun">)</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"></font><code>extend()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的示例中</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">方法将修改</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是返回有用的值（期望值</font></font><code>reduce()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">做</font></font><code>reduce</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本的</font><font style="vertical-align: inherit;">更快方法</font><font style="vertical-align: inherit;">是</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> operator
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">],[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">)</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">凯西里</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您使用</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Django，请</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不要重新发明轮子</font><font style="vertical-align: inherit;">：</font></font></h1>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> django</span><span class="pun">.</span><span class="pln">contrib</span><span class="pun">.</span><span class="pln">admin</span><span class="pun">.</span><span class="pln">utils </span><span class="kwd">import</span><span class="pln"> flatten
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">6</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">熊猫</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> pandas</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="pln">common </span><span class="kwd">import</span><span class="pln"> flatten
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itertools</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> itertools
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> flatten </span><span class="pun">=</span><span class="pln"> itertools</span><span class="pun">.</span><span class="pln">chain</span><span class="pun">.</span><span class="pln">from_iterable
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Matplotlib</font></font></strong></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> matplotlib</span><span class="pun">.</span><span class="pln">cbook </span><span class="kwd">import</span><span class="pln"> flatten
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unipath</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> unipath</span><span class="pun">.</span><span class="pln">path </span><span class="kwd">import</span><span class="pln"> flatten
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Setuptools</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> setuptools</span><span class="pun">.</span><span class="pln">namespaces </span><span class="kwd">import</span><span class="pln"> flatten
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">flatten</span><span class="pun">(</span><span class="pln">l</span><span class="pun">))</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">西里Near</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">似乎与</font></font><code>operator.add</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font><font style="vertical-align: inherit;">当您将两个列表加在一起时，正确的术语是</font></font><code>concat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不是添加。</font></font><code>operator.concat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是您需要使用的。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您认为功能正常，那么就这么简单：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> functools </span><span class="kwd">import</span><span class="pln"> reduce
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">,),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">))</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">,</span><span class="pln"> list2d</span><span class="pun">)</span><span class="pln">
</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您会看到reduce尊重序列类型，因此在提供元组时，您会得到一个元组。</font><font style="vertical-align: inherit;">让我们尝试一个列表：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">,</span><span class="pln"> list2d</span><span class="pun">)</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">啊哈，您会得到一个清单。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能如何：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">],[</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="pun">%</span><span class="pln">timeit list</span><span class="pun">(</span><span class="pln">itertools</span><span class="pun">.</span><span class="pln">chain</span><span class="pun">.</span><span class="pln">from_iterable</span><span class="pun">(</span><span class="pln">list2d</span><span class="pun">))</span><span class="pln">
</span><span class="lit">1000000</span><span class="pln"> loops</span><span class="pun">,</span><span class="pln"> best of </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1.36</span><span class="pln"> </span><span class="pun">µ</span><span class="pln">s per loop</span></code></pre>

<p><code>from_iterable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相当快！</font><font style="vertical-align: inherit;">但这是无法与相比的</font></font><code>concat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">),(</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">,),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">))</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="pun">%</span><span class="pln">timeit reduce</span><span class="pun">(</span><span class="pln">operator</span><span class="pun">.</span><span class="pln">concat</span><span class="pun">,</span><span class="pln"> list2d</span><span class="pun">)</span><span class="pln">
</span><span class="lit">1000000</span><span class="pln"> loops</span><span class="pun">,</span><span class="pln"> best of </span><span class="lit">3</span><span class="pun">:</span><span class="pln"> </span><span class="lit">492</span><span class="pln"> ns per loop</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">小卤蛋</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">作者注意</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是低效的。</font><font style="vertical-align: inherit;">但是很有趣，因为类</font></font><a href="https://en.wikipedia.org/wiki/Monoid#Monoids_in_computer_science" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">人猿</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">很棒。</font><font style="vertical-align: inherit;">它不适用于生产Python代码。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">l</span><span class="pun">,</span><span class="pln"> </span><span class="pun">[])</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这只是对在第一个参数中传递的iterable元素求和，将第二个参数视为和的初始值（如果未给出，</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则使用和，并且在这种情况下会出现错误）。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于您是对嵌套列表求和，因此实际上得到</font></font><code>[1,3]+[2,4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的结果</font></font><code>sum([[1,3],[2,4]],[])</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于</font></font><code>[1,3,2,4]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，仅适用于列表列表。</font><font style="vertical-align: inherit;">对于列表列表列表，您将需要其他解决方案。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Tom凯</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://docs.python.org/library/itertools.html#itertools.chain" rel="noreferrer"><code>itertools.chain()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> itertools
list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
merged </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">itertools</span><span class="pun">.</span><span class="pln">chain</span><span class="pun">(*</span><span class="pln">list2d</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，您可以使用</font></font><a href="https://docs.python.org/library/itertools.html#itertools.chain.from_iterable" rel="noreferrer"><code>itertools.chain.from_iterable()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不需要使用</font></font><a href="https://docs.python.org/tutorial/controlflow.html#tut-unpacking-arguments" rel="noreferrer"><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解压缩列表的方法</font><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> itertools
list2d </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">3</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">,</span><span class="lit">5</span><span class="pun">,</span><span class="lit">6</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">8</span><span class="pun">,</span><span class="lit">9</span><span class="pun">]]</span><span class="pln">
merged </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">itertools</span><span class="pun">.</span><span class="pln">chain</span><span class="pun">.</span><span class="pln">from_iterable</span><span class="pun">(</span><span class="pln">list2d</span><span class="pun">))</span></code></pre></div>
        </div>
        
      </div>
    {% endraw %}
  </div>
<div>
