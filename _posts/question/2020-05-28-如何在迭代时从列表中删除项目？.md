---
layout: question
title:  如何在迭代时从列表中删除项目？
date:   2020-05-28T07:08:12.000Z
description:                                                                         ...
img: 
author: 武藏
category: question
answer: 20
tags: Python
topic: Python
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><div>
            <aside class="s-notice s-notice__info js-post-notice mb16" role="status">
        <div class="grid fd-column fw-nowrap">
            <div class="grid fw-nowrap">
                    <div class="grid--cell mr8">
                        <svg aria-hidden="true" class="svg-icon iconLock" width="18" height="18" viewBox="0 0 18 18"><path d="M16 9a2 2 0 00-2-2V6A5 5 0 004 6v1a2 2 0 00-2 2v6c0 1.1.9 2 2 2h10a2 2 0 002-2V9zm-7 5a2 2 0 110-4 2 2 0 010 4zm3.1-7H5.9V6a3.1 3.1 0 016.2 0v1z"></path></svg>
                    </div>
                <div class="grid--cell fl1 lh-lg">
                    <div class="grid--cell fl1 lh-lg">
                        <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这个问题的答案是</font></font><a href="/help/privileges/edit-community-wiki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社区的努力</font></font></a></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">编辑现有答案以改善此职位。</font><font style="vertical-align: inherit;">它目前不接受新的答案或互动。
                        
                    </font></font></div>
                </div>
            </div>
        </div>
</aside>
    </div>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我正在遍历Python中的元组列表，并尝试在满足特定条件的情况下将其删除。 </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">):</span><span class="pln">
         code_to_remove_tup</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我应该用什么代替</font></font><code>code_to_remove_tup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">？</font><font style="vertical-align: inherit;">我不知道如何以这种方式删除项目。</font></font></p></div>
    {% endraw %}
  </div>
  <p style="height: 0;width:0;overflow: hidden;"> 第4221篇《如何在迭代时从列表中删除项目？》来自Winter(https://github.com/aiyld/aiyld.github.io)的站点</p>
  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">阿良</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我可以想到三种解决问题的方法。</font><font style="vertical-align: inherit;">例如，我将创建一个随机的元组列表</font></font><code>somelist = [(1,2,3), (4,5,6), (3,6,6), (7,8,9), (15,0,0), (10,11,12)]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">我选择的条件是</font></font><code>sum of elements of a tuple = 15</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在最终列表中，我们将只有那些总和不等于15的元组。</font></font></p>

<p><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我选择的是一个随机选择的示例。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以随意更改</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元组的列表</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">条件</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我选择了。</font></font></em> </p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法1.&gt;</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用您建议的框架（其中一个在for循环内填写代码）。</font><font style="vertical-align: inherit;">我使用一个小的代码</font></font><code>del</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来删除满足上述条件的元组。</font><font style="vertical-align: inherit;">但是，如果两个连续放置的元组满足给定条件，则此方法将丢失一个元组（满足所述条件）。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)==</span><span class="lit">15</span><span class="pln"> </span><span class="pun">):</span><span class="pln"> 
        </span><span class="kwd">del</span><span class="pln"> somelist</span><span class="pun">[</span><span class="pln">somelist</span><span class="pun">.</span><span class="pln">index</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)]</span><span class="pln">

</span><span class="kwd">print</span><span class="pln"> somelist
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="pun">[(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">)]</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法2.&gt;</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构造一个新列表，其中包含不满足给定条件的元素（元组）（这与删除满足给定条件的list的元素相同）。</font><font style="vertical-align: inherit;">以下是该代码：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">newlist1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">somelist</span><span class="pun">[</span><span class="pln">tup</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">sum</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">[</span><span class="pln">tup</span><span class="pun">])!=</span><span class="lit">15</span><span class="pun">)]</span><span class="pln">

</span><span class="kwd">print</span><span class="pln"> newlist1
</span><span class="pun">&gt;&gt;&gt;[(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">)]</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法3.&gt;</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找满足给定条件的索引，然后使用与这些索引相对应的remove元素（元组）。</font><font style="vertical-align: inherit;">以下是该代码。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">indices </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">))</span><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">sum</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])==</span><span class="lit">15</span><span class="pun">)]</span><span class="pln">
newlist2 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tup </span><span class="kwd">for</span><span class="pln"> j</span><span class="pun">,</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> j </span><span class="kwd">not</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> indices</span><span class="pun">]</span><span class="pln">

</span><span class="kwd">print</span><span class="pln"> newlist2
</span><span class="pun">&gt;&gt;&gt;[(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">),</span><span class="pln"> </span><span class="pun">(</span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="pln"> </span><span class="lit">12</span><span class="pun">)]</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法1和方法2比方法3快</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">方法2和方法3比方法1更有效。</font><font style="vertical-align: inherit;">我</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更喜欢method2</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于上述示例，</font></font><code>time(method1) : time(method2) : time(method3) = 1 : 1 : 1.7</code></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Cathy</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提出一个数字列表，您想删除所有可被3整除的数字，</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">list_number </span><span class="pun">=[</span><span class="pln">i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">100</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>list comprehension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这将创建一个新列表并创建新的内存空间</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">new_list </span><span class="pun">=[</span><span class="pln">i </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> list_number </span><span class="kwd">if</span><span class="pln"> i</span><span class="pun">%</span><span class="lit">3</span><span class="pun">!=</span><span class="lit">0</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>lambda filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数，这将创建结果新列表并占用内存空间</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">new_list </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">filter</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">x</span><span class="pun">%</span><span class="lit">3</span><span class="pun">!=</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> list_number</span><span class="pun">))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无需占用新列表和修改现有列表的存储空间</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> index</span><span class="pun">,</span><span class="pln"> value </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">list_number</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> list_number</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]%</span><span class="lit">3</span><span class="pun">==</span><span class="lit">0</span><span class="pun">:</span><span class="pln">
        list_number</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">古一</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下，您要做的不仅仅是一次过滤一个列表，还希望迭代时更改迭代。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个示例，其中预先复制列表是不正确的，不可能进行反向迭代，并且列表理解也不是一种选择。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="str">""" Sieve of Eratosthenes """</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> generate_primes</span><span class="pun">(</span><span class="pln">n</span><span class="pun">):</span><span class="pln">
    </span><span class="str">""" Generates all primes less than n. """</span><span class="pln">
    primes </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">range</span><span class="pun">(</span><span class="lit">2</span><span class="pun">,</span><span class="pln">n</span><span class="pun">))</span><span class="pln">
    idx </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> idx </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">primes</span><span class="pun">):</span><span class="pln">
        p </span><span class="pun">=</span><span class="pln"> primes</span><span class="pun">[</span><span class="pln">idx</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> multiple </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">p</span><span class="pun">+</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">,</span><span class="pln"> p</span><span class="pun">):</span><span class="pln">
            </span><span class="kwd">try</span><span class="pun">:</span><span class="pln">
                primes</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">multiple</span><span class="pun">)</span><span class="pln">
            </span><span class="kwd">except</span><span class="pln"> </span><span class="typ">ValueError</span><span class="pun">:</span><span class="pln">
                </span><span class="kwd">pass</span><span class="pln"> </span><span class="com">#EAFP</span><span class="pln">
        idx </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
        </span><span class="kwd">yield</span><span class="pln"> p</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">伽罗理查德</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果以后要使用新列表，则只需将elem设置为None，然后在以后的循环中对其进行判断，如下所示</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> li</span><span class="pun">:</span><span class="pln">
    i </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">None</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> elem </span><span class="kwd">in</span><span class="pln"> li</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> elem </span><span class="kwd">is</span><span class="pln"> </span><span class="kwd">None</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">continue</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样，您无需复制列表，而且更容易理解。 </font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">古一</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此类示例的最佳方法是</font></font><a href="http://docs.python.org/tutorial/datastructures.html#list-comprehensions" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表理解</font></font></a></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">somelist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tup </span><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您要做的事情比调用</font></font><code>determine</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">更复杂</font><font style="vertical-align: inherit;">，我更喜欢构造一个新列表，然后随便添加它。</font><font style="vertical-align: inherit;">例如</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">newlist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">:</span><span class="pln">
    </span><span class="com"># lots of code here, possibly setting things up for calling determine</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">):</span><span class="pln">
        newlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)</span><span class="pln">
somelist </span><span class="pun">=</span><span class="pln"> newlist</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用列表复制列表</font></font><code>remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会使您的代码看起来更简洁，如以下答案之一所述。</font><font style="vertical-align: inherit;">您绝对不应该对非常大的列表执行此操作，因为这涉及到首先复制整个列表，然后</font></font><code>O(n)</code> <code>remove</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对要删除的每个元素</font><font style="vertical-align: inherit;">执行</font><font style="vertical-align: inherit;">操作，从而使其成为一种</font></font><code>O(n^2)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">算法。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">[:]:</span><span class="pln">
    </span><span class="com"># lots of code here, possibly setting things up for calling determine</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">):</span><span class="pln">
        newlist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">猪猪</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于具有很大潜力的任何事物，我使用以下内容。 </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np

orig_list </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">array</span><span class="pun">([</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">8</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">])</span><span class="pln">

remove_me </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">

cleaned </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">delete</span><span class="pun">(</span><span class="pln">orig_list</span><span class="pun">,</span><span class="pln"> remove_me</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">cleaned</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那应该比其他任何东西都快得多。 </font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Tony凯</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要在迭代时从列表中删除元素，请使用while循环，以便可以在每次删除后更改当前索引和结束索引。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
length </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">list1</span><span class="pun">)</span><span class="pln">

</span><span class="kwd">while</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> length</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> condition</span><span class="pun">:</span><span class="pln">
        list1</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">list1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln">
        i </span><span class="pun">-=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
        length </span><span class="pun">-=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">

    i </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Elena</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">for循环将通过索引进行迭代。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">认为你有一个清单，</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">,</span><span class="pln"> </span><span class="lit">29</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">,</span><span class="pln"> </span><span class="lit">91</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您使用了名为的列表变量</font></font><code>lis</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">并且您使用它删除。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你的变量 </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lis </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">,</span><span class="pln"> </span><span class="lit">29</span><span class="pun">,</span><span class="pln"> </span><span class="lit">35</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">,</span><span class="pln"> </span><span class="lit">91</span><span class="pun">]</span><span class="pln">
       </span><span class="lit">0</span><span class="pln">  </span><span class="lit">1</span><span class="pln">   </span><span class="lit">2</span><span class="pln">   </span><span class="lit">3</span><span class="pln">   </span><span class="lit">4</span><span class="pln">   </span><span class="lit">5</span><span class="pln">   </span><span class="lit">6</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在第5次迭代中</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您的</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数字35</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是素数，因此您将其从列表中删除。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lis</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一个值（65）</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移至上一个索引。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lis </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">,</span><span class="pln"> </span><span class="lit">29</span><span class="pun">,</span><span class="pln"> </span><span class="lit">65</span><span class="pun">,</span><span class="pln"> </span><span class="lit">91</span><span class="pun">]</span><span class="pln">
       </span><span class="lit">0</span><span class="pln">  </span><span class="lit">1</span><span class="pln">   </span><span class="lit">2</span><span class="pln">   </span><span class="lit">3</span><span class="pln">   </span><span class="lit">4</span><span class="pln">   </span><span class="lit">5</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以第4次迭代完成的指针移到了第5位。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">那就是为什么您的循环自从移入上一个索引以来不覆盖65。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此，您不应将列表引用到另一个仍引用原始而不是副本的变量中。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">ite </span><span class="pun">=</span><span class="pln"> lis </span><span class="com">#dont do it will reference instead copy</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以使用 </font></font><code>list[::]</code></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在你会给，</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">,</span><span class="pln"> </span><span class="lit">29</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问题是您在迭代过程中从列表中删除了一个值，然后列表索引将崩溃。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">因此您可以尝试理解。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它支持所有可迭代的对象，例如list，tuple，dict，string等 </font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Mandy</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他答案是正确的，因为从要迭代的列表中删除通常不是一个好主意。</font><font style="vertical-align: inherit;">反向迭代避免了陷阱，但是遵循这样做的代码要困难得多，因此通常最好使用列表推导或</font></font><code>filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但是，在一种情况下，可以安全地从要迭代的序列中删除元素：如果仅在迭代时删除一个项目。</font><font style="vertical-align: inherit;">可以使用a </font></font><code>return</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或a </font><font style="vertical-align: inherit;">来确保</font></font><code>break</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">lst</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> item </span><span class="pun">%</span><span class="pln"> </span><span class="lit">4</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
        foo</span><span class="pun">(</span><span class="pln">item</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">del</span><span class="pln"> lst</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">break</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您对满足条件的列表中的第一个项目执行副作用操作，然后立即从列表中删除该项目时，这通常比列表理解更容易理解。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">西里神奇</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以尝试反向进行循环，因此对于some_list，您将执行以下操作：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">list_len </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">some_list</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">list_len</span><span class="pun">):</span><span class="pln">
    reverse_i </span><span class="pun">=</span><span class="pln"> list_len </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> i
    cur </span><span class="pun">=</span><span class="pln"> some_list</span><span class="pun">[</span><span class="pln">reverse_i</span><span class="pun">]</span><span class="pln">

    </span><span class="com"># some logic with cur element</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> some_condition</span><span class="pun">:</span><span class="pln">
        some_list</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">(</span><span class="pln">reverse_i</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这样，索引是对齐的，并且不会受到列表更新的影响（无论是否弹出cur元素）。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Tom凯</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最有效的方法是列表理解，很多人都表现出他们的情况，当然，这也是一个很好的方式得到一个</font></font><code>iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过</font></font><code>filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<blockquote>
  <p><code>Filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接收一个函数和一个序列。</font></font><code>Filter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将传递的函数依次应用于每个元素，然后根据函数返回值是</font></font><code>True</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还是</font><font style="vertical-align: inherit;">决定是保留还是丢弃该元素</font></font><code>False</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个例子（在元组中获得赔率）：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">list</span><span class="pun">(</span><span class="pln">filter</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">x</span><span class="pun">%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">6</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">,</span><span class="pln"> </span><span class="lit">15</span><span class="pun">)))</span><span class="pln">  
</span><span class="com"># result: [1, 5, 9, 15]</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告：您也不能处理迭代器。</font><font style="vertical-align: inherit;">迭代器有时比序列更好。</font></font></strong></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">飞羽</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里的大多数答案都希望您创建列表的副本。</font><font style="vertical-align: inherit;">我有一个用例，其中的列表很长（110K个项），而继续缩小列表会更明智。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，您需要将</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while循环替换为foreach循环</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]):</span><span class="pln">
         </span><span class="kwd">del</span><span class="pln"> somelist</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
        i </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span></code></pre>

<p><font style="vertical-align: inherit;"></font><code>i</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if块中</font><font style="vertical-align: inherit;">的值</font><font style="vertical-align: inherit;">不会更改，因为一旦删除了旧项，您将希望从同一索引中获取新项的值。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">L木嘢</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前列表项符合期望的条件，那么也只创建一个新列表可能很聪明。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所以：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> item </span><span class="kwd">in</span><span class="pln"> originalList</span><span class="pun">:</span><span class="pln">
   </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">item </span><span class="pun">!=</span><span class="pln"> badValue</span><span class="pun">):</span><span class="pln">
        newList</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">item</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且避免必须使用新的列表名称重新编码整个项目：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">originalList</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> newList</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意，来自Python文档： </font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy.copy（x）返回x的浅表副本。</font></font></p>
  
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">copy.deepcopy（x）返回x的深层副本。</font></font></p>
</blockquote></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">十三</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可能要使用</font></font><code>filter()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">available作为内置函数。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欲了解更多详情，</font></font><a href="http://docs.python.org/library/functions.html#filter" rel="nofollow noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请点击这里</font></font></a></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">古一</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于那些喜欢函数式编程的人：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> filter</span><span class="pun">(</span><span class="kwd">lambda</span><span class="pln"> tup</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">),</span><span class="pln"> somelist</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要么</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">from</span><span class="pln"> itertools </span><span class="kwd">import</span><span class="pln"> ifilterfalse
somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">ifilterfalse</span><span class="pun">(</span><span class="pln">determine</span><span class="pun">,</span><span class="pln"> somelist</span><span class="pun">))</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">蛋蛋</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要获取列表的副本并首先对其进行迭代，否则迭代将失败，并可能导致意外结果。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如（取决于列表的类型）：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">[:]:</span><span class="pln">
    etc</span><span class="pun">....</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个例子：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> somelist </span><span class="pun">=</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">:</span><span class="pln">
</span><span class="pun">...</span><span class="pln">     somelist</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> somelist
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">3</span><span class="pun">,</span><span class="pln"> </span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">9</span><span class="pun">]</span><span class="pln">

</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> somelist </span><span class="pun">=</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">10</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> somelist</span><span class="pun">[:]:</span><span class="pln">
</span><span class="pun">...</span><span class="pln">     somelist</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> somelist
</span><span class="pun">[]</span></code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">斯丁</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用列表推导来创建一个仅包含您不想删除的元素的新列表：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">somelist </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">x </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> somelist </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者，通过分配给slice </font></font><code>somelist[:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以将现有列表突变为仅包含所需的项目：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">x </span><span class="kwd">for</span><span class="pln"> x </span><span class="kwd">in</span><span class="pln"> somelist </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果还有其他引用</font></font><code>somelist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要反映更改，</font><font style="vertical-align: inherit;">则此方法可能很有用</font><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了理解之外，您还可以使用</font></font><code>itertools</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在Python 2中：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">from</span><span class="pln"> itertools </span><span class="kwd">import</span><span class="pln"> ifilterfalse
somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> ifilterfalse</span><span class="pun">(</span><span class="pln">determine</span><span class="pun">,</span><span class="pln"> somelist</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或在Python 3中：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">from</span><span class="pln"> itertools </span><span class="kwd">import</span><span class="pln"> filterfalse
somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> filterfalse</span><span class="pun">(</span><span class="pln">determine</span><span class="pun">,</span><span class="pln"> somelist</span><span class="pun">)</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了清楚起见，以及对于那些发现使用</font></font><code>[:]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">黑变或模糊表示法的人，这里有一个更明确的选择。</font><font style="vertical-align: inherit;">从理论上讲，它在空间和时间上的表现应该与上面的单层表现相同。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">temp </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> somelist</span><span class="pun">:</span><span class="pln">
    x </span><span class="pun">=</span><span class="pln"> somelist</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">()</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">x</span><span class="pun">):</span><span class="pln">
        temp</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">x</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> temp</span><span class="pun">:</span><span class="pln">
    somelist</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">templist</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">())</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它也可以在其他语言中工作，而这些语言可能不具有</font><font style="vertical-align: inherit;">Python列表</font><font style="vertical-align: inherit;">的</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">替换项</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能，并且只需进行很少的修改即可。</font><font style="vertical-align: inherit;">例如，并非所有语言都</font></font><code>False</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">像Python一样</font><font style="vertical-align: inherit;">将空列表转换</font><font style="vertical-align: inherit;">为。</font><font style="vertical-align: inherit;">您可以替换</font></font><code>while somelist:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更明确的内容，例如</font></font><code>while len(somelist) &gt; 0:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">王者一打九</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我需要使用大量列表来完成此操作，并且复制列表似乎很昂贵，尤其是因为在我的情况下，与保留的项目相比，删除的数量很少。</font><font style="vertical-align: inherit;">我采用了这种低级方法。</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">array </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lots of stuff</span><span class="pun">]</span><span class="pln">
arraySize </span><span class="pun">=</span><span class="pln"> len</span><span class="pun">(</span><span class="pln">array</span><span class="pun">)</span><span class="pln">
i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">while</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> arraySize</span><span class="pun">:</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> someTest</span><span class="pun">(</span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]):</span><span class="pln">
        </span><span class="kwd">del</span><span class="pln"> array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        arraySize </span><span class="pun">-=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
        i </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我不知道几个删除相比复制大型列表的效率如何。</font><font style="vertical-align: inherit;">如果您有任何见解，请发表评论。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">神无</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">暗示列表理解的答案几乎是正确的-除了它们会建立一个全新的列表，然后为其命名与旧列表相同，而不会在原地修改旧列表。</font><font style="vertical-align: inherit;">这与</font></font><a href="https://stackoverflow.com/a/1207427/3064538"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@Lennart的建议中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的选择性删除操作不同</font><font style="vertical-align: inherit;">-速度更快，但是如果通过多个引用访问列表，则事实是您只是在重新放置其中一个引用而不更改列表对象本身可能会导致微妙的灾难性错误。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">幸运的是，获得列表理解的速度和就地变更所需的语义非常容易-只需编写代码：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">somelist</span><span class="pun">[:]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">tup </span><span class="kwd">for</span><span class="pln"> tup </span><span class="kwd">in</span><span class="pln"> somelist </span><span class="kwd">if</span><span class="pln"> determine</span><span class="pun">(</span><span class="pln">tup</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意与其他答案的细微差别：这不是分配给裸名-而是分配给恰好是整个列表的列表切片，从而替换</font><strong><font style="vertical-align: inherit;">同一Python列表对象中</font></strong><font style="vertical-align: inherit;">的列表</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内容</font></font></em> <font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而不仅仅是重新</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">放置</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个引用（从先前的列表对象到新的列表对象），就像其他答案一样。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">Mandy村村</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> some_condition</span><span class="pun">(</span><span class="pln">somelist</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">del</span><span class="pln"> somelist</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您需要向后走，否则就像将您坐在的树枝锯掉一样:-)</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python 2用户：替换</font></font><code>range</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>xrange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以避免创建硬编码列表</font></font></p></div>
        </div>
        
      </div>
    {% endraw %}
  </div>
<div>
