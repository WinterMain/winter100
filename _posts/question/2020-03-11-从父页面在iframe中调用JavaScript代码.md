---
layout: question
title:  从父页面在iframe中调用JavaScript代码
date:   2020-03-11T15:28:29.000Z
description: 基本上，我有一个iframe嵌入页面的页面，并且iframe有一些需要从父页面调用的JavaScript例程。现在，相反的操作非常简单，因为您只需要调...
img: 
author: 流云
category: question
answer: 7
tags: JavaScript
topic: JavaScript
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本上，我有一个</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">嵌入页面的页面，并且</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一些</font><font style="vertical-align: inherit;">需要从父页面调用的</font></font><a href="http://en.wikipedia.org/wiki/JavaScript" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">JavaScript</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例程。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，相反的操作非常简单，因为您只需要调用</font></font><code>parent.functionName()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是不幸的是，我需要恰好相反。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，我的问题是不会改变的源</font></font><a href="http://en.wikipedia.org/wiki/Uniform_Resource_Locator" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是调用在定义的函数</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p></div>
    {% endraw %}
  </div>

  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">小宇宙</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试一下 </font></font><code>parent.myfunction()</code></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">前端逆天</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p>If you want to invoke the JavaScript function on the Parent from the iframe generated by another function ex shadowbox or lightbox. </p>

<p>You should try to make use of <code>window</code> object and invoke parent function:</p>

<pre><code>window.parent.targetFunction();
</code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">JinJin神奇宝儿</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同样的事情，但是更简单的方法是</font></font><a href="http://dotnetspidor.blogspot.com/2011/07/refresh-parent-page-partially-from.html" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何从iframe中的页面刷新父页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">只需调用父页面的函数即可调用javascript函数来重新加载页面：</font></font></p>

<pre><code>window.location.reload();
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或直接在iframe中的页面上执行此操作：</font></font></p>

<pre><code>window.parent.location.reload();
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两者都可以。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">米亚猴子</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我找到了一个很好的解决方案。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如您所说，执行位于父文档中的代码相当容易。</font><font style="vertical-align: inherit;">这就是我的代码的基础，反之亦然。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载iframe时，我会调用位于父文档上的函数，并将对iframe文档中本地函数的引用作为参数传递。</font><font style="vertical-align: inherit;">现在，通过此引用，父文档可以直接访问iframe的功能。</font></font></p>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例：</font></font></strong></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在父项上：</font></font></p>

<pre><code>function tunnel(fn) {<font></font>
    fn();<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在iframe上：</font></font></p>

<pre><code>var myFunction = function() {<font></font>
    alert("This work!");<font></font>
}<font></font>
<font></font>
parent.tunnel(myFunction);<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载iframe时，它将调用parent.tunnel（YourFunctionReference），它将执行参数中接收的功能。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如此简单，而不必处理各种浏览器中的所有非标准方法。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">伽罗小哥</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><pre><code>       $("#myframe").load(function() {<font></font>
            alert("loaded");<font></font>
        });<font></font>
</code></pre></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">小哥卡卡西</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以从中调用父级JS函数</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但是仅当父级和加载到的页面</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都来自同一个域（即abc.com）并且都使用相同的协议（即两者都在</font></font><code>http://</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">上）</font><font style="vertical-align: inherit;">时才</font><font style="vertical-align: inherit;">可以</font></font><code>https://</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在以下情况下，呼叫将失败：</font></font></p>

<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">父页面和iframe页面来自不同的域。</font></font><br></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">他们使用的协议不同，一个协议位于http：//，另一个协议位于https：//。</font></font><br></li>
</ol>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对此限制的任何解决方法都是极其不安全的。 </font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，假设我注册了域名superwinningcontest.com，并发送了指向人们电子邮件的链接。</font><font style="vertical-align: inherit;">当他们加载主页时，我可以</font></font><code>iframe</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在其中</font><font style="vertical-align: inherit;">隐藏几</font><font style="vertical-align: inherit;">秒钟并阅读他们的Facebook提要，查看最近的Amazon或PayPal交易，或者-如果他们使用的服务没有实现足够的安全性，则可以从他们的账户中转出资金帐户。</font><font style="vertical-align: inherit;">这就是JavaScript仅限于相同域和相同协议的原因。</font></font></p></div>
        </div>
        
      </div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">神奇启人</span>
            <span class="discuss-time">2020.03.11</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在IFRAME中，将函数公开给window对象：</font></font></p>

<pre><code>window.myFunction = function(args) {<font></font>
   doStuff();<font></font>
}<font></font>
</code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要从父页面进行访问，请使用以下命令：</font></font></p>

<pre><code>var iframe = document.getElementById("iframeId");<font></font>
iframe.contentWindow.myFunction(args);<font></font>
</code></pre></div>
        </div>
        
      </div>
    {% endraw %}
  </div>
<div>
