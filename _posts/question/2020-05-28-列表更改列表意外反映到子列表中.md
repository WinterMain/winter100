---
layout: question
title:  列表更改列表意外反映到子列表中
date:   2020-05-28T07:05:34.000Z
description: 我需要在Python中创建列表列表，因此输入了以下内容：  myList = \[\[1\] \* 4\] \* 3该列表如下所示：  \[\[1, 1, 1...
img: 
author: 米亚
category: question
answer: 11
tags: Python
topic: Python
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我需要在Python中创建列表列表，因此输入了以下内容：  </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">myList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该列表如下所示：  </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">  </span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，我更改了最内在的值之一：  </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">myList</span><span class="pun">[</span><span class="lit">0</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在我的列表如下所示：  </font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">  </span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这不是我想要或期望的。</font><font style="vertical-align: inherit;">有人可以解释发生了什么，以及如何解决吗？</font></font></p></div>
    {% endraw %}
  </div>
  <p class="winter_mark">第4216篇《列表更改列表意外反映到子列表中》来自Winter(https://github.com/aiyld/aiyld.github.io)的站点</p>
  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-list">
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">飞云</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><code>myList = [[1]*4] * 3</code><font style="vertical-align: inherit;"></font><code>[1,1,1,1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在内存中</font><font style="vertical-align: inherit;">创建一个列表对象</font><font style="vertical-align: inherit;">，然后将其引用复制3次。</font><font style="vertical-align: inherit;">这等效于</font></font><code>obj = [1,1,1,1]; myList = [obj]*3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">列表中引用的</font></font><code>obj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何地方，</font><font style="vertical-align: inherit;">对的任何修改</font><font style="vertical-align: inherit;">都会在三个地方反映出来</font></font><code>obj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">正确的声明是：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">myList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> _ </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要么</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">myList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> __ </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)]</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> _ </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)]</span></code></pre>

<p><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里要注意的重要一点</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，</font></font><code>*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于创建</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文字列表</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">虽然</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一成不变的，</font></font><code>obj =[1]*4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但仍将创建</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重复4遍以上</font><font style="vertical-align: inherit;">的列表</font></font><code>[1,1,1,1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，如果对不可变对象进行了任何引用，则该对象将被新对象覆盖。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着，如果我们这样做</font></font><code>obj[1]=42</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，那么</font></font><code>obj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它将变得</font></font><code>[1,42,1,1]</code> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不像</font></font></strong> <strike><code>[42,42,42,42]</code></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">某些人想象的那样。</font><font style="vertical-align: inherit;">这也可以验证：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> myList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> myList
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
</span><span class="lit">4522139440</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="com"># Same as myList[0]</span><span class="pln">
</span><span class="lit">4522139440</span></code></pre>

<hr>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> myList</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">42</span><span class="pln"> </span><span class="com"># Since myList[1] is immutable, this operation overwrites myList[1] with a new object changing its id.</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> myList
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">42</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">

</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
</span><span class="lit">4522139440</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">[</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="com"># id changed</span><span class="pln">
</span><span class="lit">4522140752</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">[</span><span class="lit">2</span><span class="pun">])</span><span class="pln"> </span><span class="com"># id still same as myList[0], still referring to value `1`.</span><span class="pln">
</span><span class="lit">4522139440</span></code></pre></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">神乐</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过使用内置列表功能，您可以像这样</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">a
out</span><span class="pun">:[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="com">#Displaying the list</span><span class="pln">

a</span><span class="pun">.</span><span class="pln">remove</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">])</span><span class="pln">
out</span><span class="pun">:[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="com"># Removed the first element of the list in which you want altered number</span><span class="pln">

a</span><span class="pun">.</span><span class="pln">append</span><span class="pun">([</span><span class="lit">5</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
out</span><span class="pun">:[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="com"># append the element in the list but the appended element as you can see is appended in last but you want that in starting</span><span class="pln">

a</span><span class="pun">.</span><span class="pln">reverse</span><span class="pun">()</span><span class="pln">
out</span><span class="pun">:[[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="com">#So at last reverse the whole list to get the desired list</span></code></pre></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">杜大爷</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">让我们以以下方式重写您的代码：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">x </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
y </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln">
z </span><span class="pun">=</span><span class="pln"> y </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pln">

myList </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">z</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，运行以下代码使所有内容更加清晰。</font><font style="vertical-align: inherit;">该代码所做的基本上是打印</font></font><a href="https://docs.python.org/2/library/functions.html#id" rel="nofollow"><code>id</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得的对象的，</font></font></p>

<blockquote>
  <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回对象的“身份”</font></font></p>
</blockquote>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将帮助我们识别它们并分析发生的情况：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="kwd">print</span><span class="pun">(</span><span class="str">"myList:"</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> subList </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">myList</span><span class="pun">):</span><span class="pln">
    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"\t[{}]: {}"</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">subList</span><span class="pun">)))</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> j</span><span class="pun">,</span><span class="pln"> elem </span><span class="kwd">in</span><span class="pln"> enumerate</span><span class="pun">(</span><span class="pln">subList</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"\t\t[{}]: {}"</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">j</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">(</span><span class="pln">elem</span><span class="pun">)))</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您将获得以下输出：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">x</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
y</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
z</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">
myList</span><span class="pun">:</span><span class="pln">
    </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4300763792</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">3</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
    </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4300763792</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">3</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
    </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4300763792</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span><span class="pln">
        </span><span class="pun">[</span><span class="lit">3</span><span class="pun">]:</span><span class="pln"> </span><span class="lit">4298171528</span></code></pre>

<hr>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在让我们逐步进行。</font><font style="vertical-align: inherit;">你有</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">哪些是</font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和一个单一的元素列表</font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">第一步是</font></font><code>y * 4</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将获得一个</font></font><code>z</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本上是</font><font style="vertical-align: inherit;">的新列表</font><font style="vertical-align: inherit;">，</font></font><code>[x, x, x, x]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即创建一个包含4个元素的新列表，这些元素是对初始</font></font><code>x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象的</font><font style="vertical-align: inherit;">引用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">净步骤非常相似。</font><font style="vertical-align: inherit;">基本上</font></font><code>z * 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">您要做的</font><font style="vertical-align: inherit;">是</font></font><code>[[x, x, x, x]] * 3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和返回</font></font><code>[[x, x, x, x], [x, x, x, x], [x, x, x, x]]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其原因与第一步相同。</font></font></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">DavaidTony宝儿</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@spelchekr来自</font></font><a href="https://stackoverflow.com/questions/6688223/python-list-multiplication-3-makes-3-lists-which-mirror-each-other-when"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python的列表乘法：[[...]] * 3使得3个列表在修改后会相互镜像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，我也有一个相同的问题：“为什么只有外部* 3创建更多引用，而内部* 3却没有创建更多引用为什么不是全1？”</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">li </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">([</span><span class="pln">id</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> li</span><span class="pun">])</span><span class="pln"> </span><span class="com"># [140724141863728, 140724141863728, 140724141863728]</span><span class="pln">
li</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">([</span><span class="pln">id</span><span class="pun">(</span><span class="pln">v</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> v </span><span class="kwd">in</span><span class="pln"> li</span><span class="pun">])</span><span class="pln"> </span><span class="com"># [140724141863760, 140724141863728, 140724141863728]</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">id</span><span class="pun">(</span><span class="lit">0</span><span class="pun">))</span><span class="pln"> </span><span class="com"># 140724141863728</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">id</span><span class="pun">(</span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="com"># 140724141863760</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">li</span><span class="pun">)</span><span class="pln"> </span><span class="com"># [1, 0, 0]</span><span class="pln">

ma </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">0</span><span class="pun">]*</span><span class="lit">3</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="com"># mainly discuss inner &amp; outer *3 here</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">([</span><span class="pln">id</span><span class="pun">(</span><span class="pln">li</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> li </span><span class="kwd">in</span><span class="pln"> ma</span><span class="pun">])</span><span class="pln"> </span><span class="com"># [1987013355080, 1987013355080, 1987013355080]</span><span class="pln">
ma</span><span class="pun">[</span><span class="lit">0</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">([</span><span class="pln">id</span><span class="pun">(</span><span class="pln">li</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> li </span><span class="kwd">in</span><span class="pln"> ma</span><span class="pun">])</span><span class="pln"> </span><span class="com"># [1987013355080, 1987013355080, 1987013355080]</span><span class="pln">
</span><span class="kwd">print</span><span class="pun">(</span><span class="pln">ma</span><span class="pun">)</span><span class="pln"> </span><span class="com"># [[1, 0, 0], [1, 0, 0], [1, 0, 0]]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试上面的代码后，这是我的解释：</font></font></p>

<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内部</font></font><code>*3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">也创建引用，但是它的引用是不可变的，类似</font></font><code>[&amp;0, &amp;0, &amp;0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，然后在进行更改时</font></font><code>li[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您无法更改const int的任何基础引用</font></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此您只需将引用地址更改为新的引用地址即可</font></font><code>&amp;1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">while </font></font><code>ma=[&amp;li, &amp;li, &amp;li]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>li</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mutable是可变的，因此当您调用时</font></font><code>ma[0][0]=1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，ma [0] [0]等于to </font></font><code>&amp;li[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此所有</font></font><code>&amp;li</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例都将其第一个地址更改为</font></font><code>&amp;1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
</ul></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">乐</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我想每个人都解释发生了什么。</font><font style="vertical-align: inherit;">我建议一种解决方法：</font></font></p>

<p><code>myList = [[1 for i in range(4)] for j in range(3)]</code></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">myList</span><span class="pun">[</span><span class="lit">0</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></code></pre>

<p><code>print myList</code></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后您有：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span></code></pre></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">小胖Gil</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python容器包含对其他对象的引用。</font><font style="vertical-align: inherit;">请参阅以下示例：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">a</span><span class="pun">]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> b
</span><span class="pun">[[]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> b
</span><span class="pun">[[</span><span class="lit">1</span><span class="pun">]]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此</font></font><code>b</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">列表中包含一个项目，该项目是对list的引用</font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该列表</font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是可变的。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将列表乘以整数等于将列表多次添加到自身（请参阅</font></font><a href="https://docs.python.org/3/library/stdtypes.html#typesseq-common" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常见序列操作</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">因此，继续下面的示例：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> b </span><span class="pun">+</span><span class="pln"> b
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> c
</span><span class="pun">[[</span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> c
</span><span class="pun">[[</span><span class="lit">2</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们可以看到列表</font></font><code>c</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在包含两个对list的引用，</font></font><code>a</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它们等效于</font></font><code>c = b * 2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python FAQ也包含此行为的解释：</font></font><a href="https://docs.python.org/3/faq/programming.html#faq-multidimensional-list" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如何创建多维列表？</font></font></a></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">千羽</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实际上，这正是您所期望的。</font><font style="vertical-align: inherit;">让我们分解一下这里发生的事情：</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你写</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这等效于：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lst1 </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln">
lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">lst1</span><span class="pun">]*</span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着</font></font><code>lst</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一个包含3个元素的列表</font></font><code>lst1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着以下两行是等效的：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lst</span><span class="pun">[</span><span class="lit">0</span><span class="pun">][</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
lst1</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">至于</font></font><code>lst[0]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是什么，但</font></font><code>lst1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要获得所需的行为，可以使用列表理解：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> n </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="com">#python 3</span><span class="pln">
lst </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> n </span><span class="kwd">in</span><span class="pln"> xrange</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="com">#python 2</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这种情况下，将对每个n重新计算表达式，从而得出不同的列表。</font></font></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">猴子村村</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简而言之，这是因为在python中，所有内容都可以</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过引用来工作</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此，当您以这种方式创建列表列表时，基本上会遇到此类问题。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决您的问题，您可以执行以下任一操作：1.将numpy数组</font></font><a href="http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.empty.html" rel="noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档用于numpy.empty。2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
.将列表追加到列表中。</font><font style="vertical-align: inherit;">3.您也可以使用字典  </font></font></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">达蒙</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了可以正确解释问题的公认答案之外，在列表理解范围内，如果您使用的是python-2.x，则使用return会</font></font><code>xrange()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成一个更有效的生成器（</font></font><code>range()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在python 3中执行相同的工作），</font></font><code>_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是throwaway变量</font></font><code>n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">1</span><span class="pun">]*</span><span class="lit">4</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> _ </span><span class="kwd">in</span><span class="pln"> xrange</span><span class="pun">(</span><span class="lit">3</span><span class="pun">)]</span><span class="pln">      </span><span class="com"># and in python3 [[1]*4 for _ in range(3)]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">另外，作为一种</font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Python</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方式，您可以</font></font><a href="https://docs.python.org/2/library/itertools.html#itertools.repeat" rel="nofollow noreferrer"><code>itertools.repeat()</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用来创建重复元素的迭代器对象：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a</span><span class="pun">=</span><span class="pln">list</span><span class="pun">(</span><span class="pln">repeat</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="lit">4</span><span class="pun">))</span><span class="pln">
</span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]=</span><span class="lit">5</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> a
</span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS使用numpy的，如果你只是想创建1或0，你可以使用数组</font></font><code>np.ones</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>np.zeros</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和/或其他使用次数</font></font><code>np.repeat()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> numpy </span><span class="kwd">as</span><span class="pln"> np

</span><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> 

</span><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">ones</span><span class="pun">(</span><span class="lit">4</span><span class="pun">)</span><span class="pln">
</span><span class="typ">Out</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]:</span><span class="pln"> array</span><span class="pun">([</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">])</span><span class="pln">

</span><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">3</span><span class="pun">]:</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">ones</span><span class="pun">((</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">))</span><span class="pln">
</span><span class="typ">Out</span><span class="pun">[</span><span class="lit">3</span><span class="pun">]:</span><span class="pln"> 
array</span><span class="pun">([[</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">1.</span><span class="pun">]])</span><span class="pln">

</span><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">4</span><span class="pun">]:</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">zeros</span><span class="pun">((</span><span class="lit">4</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">))</span><span class="pln">
</span><span class="typ">Out</span><span class="pun">[</span><span class="lit">4</span><span class="pun">]:</span><span class="pln"> 
array</span><span class="pun">([[</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">0.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">0.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">0.</span><span class="pun">],</span><span class="pln">
       </span><span class="pun">[</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">,</span><span class="pln">  </span><span class="lit">0.</span><span class="pun">]])</span><span class="pln">

</span><span class="typ">In</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">]:</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">repeat</span><span class="pun">([</span><span class="lit">7</span><span class="pun">],</span><span class="pln"> </span><span class="lit">10</span><span class="pun">)</span><span class="pln">
</span><span class="typ">Out</span><span class="pun">[</span><span class="lit">5</span><span class="pun">]:</span><span class="pln"> array</span><span class="pun">([</span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">,</span><span class="pln"> </span><span class="lit">7</span><span class="pun">])</span></code></pre></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">DavaidTony宝儿</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">4</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甚至：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="lit">3</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">创建一个引用内部</font></font><code>[1,1,1,1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3次</font><font style="vertical-align: inherit;">的列表</font><font style="vertical-align: inherit;">-而不是内部列表的3个副本，因此，每次修改列表（在任何位置）时，都会看到3次更改。</font></font></p>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与此示例相同：</font></font></p>

<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;&gt;&gt;</span><span class="pln"> inner </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> outer </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="pln">inner</span><span class="pun">]*</span><span class="lit">3</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> outer
</span><span class="pun">[[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> inner</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> outer
</span><span class="pun">[[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> </span><span class="pun">[</span><span class="lit">5</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]]</span></code></pre>

<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能不那么令人惊讶。</font></font></p></div>
        </div></div><div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">GO</span>
            <span class="discuss-time">2020.05.28</span>
          </div>
          <div class="discuss-comment"><pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pln">size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
matrix_surprise </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> size</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> size
matrix </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[[</span><span class="lit">0</span><span class="pun">]*</span><span class="pln">size </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">size</span><span class="pun">)]</span></code></pre>

<p><img src="https://i.stack.imgur.com/uHuck.png" alt="框架和物体"></p>

<p><a href="http://pythontutor.com/visualize.html#code=size+%3D+3%0Amatrix_surprise+%3D+%5B%5B0%5D+*+size%5D+*+size%0Amatrix+%3D+%5B%5B0%5D*size+for+i+in+range(size)%5D&amp;mode=display&amp;cumulative=false&amp;heapPrimitives=false&amp;drawParentPointers=false&amp;textReferences=false&amp;showOnlyOutputs=false&amp;py=2&amp;curInstr=6" rel="noreferrer" title="实时Python导师可视化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时Python导师可视化</font></font></a></p></div>
        </div></div>
    </div>
    {% endraw %}
  </div>
<div>
