---
layout: post
title:  è¯´è¯´Reactçš„äº‹ï¼ˆä¸ƒï¼‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ
date:   2017-10-17T10:08:38.000Z
description: åœ¨æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¼´ç€ç»„ä»¶çš„Propså’ŒStateçš„æ”¹å˜ï¼Œç»„ä»¶çš„DOMè¡¨ç°å½¢å¼ä¹Ÿå°†å‘ç”Ÿç›¸åº”çš„å˜åŒ–ã€‚Reactä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå„ä¸ªæ—¶å€™æä¾›ç›¸åº”çš„æ–¹æ³•æ¥å“åº”ä¸...
img: https://www.samyoc.com//uploads/users/1/images/1508231631368.png
author: Winter
category: blog
answer: 1
tags: è¯´è¯´Reactçš„äº‹
---
<div class="article-root">
  <div class="article">
    {% include articleTitle.html info=page %}
    {% raw %}
    <div class="article-content"><p>åœ¨æ•´ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä¼´ç€ç»„ä»¶çš„Propså’ŒStateçš„æ”¹å˜ï¼Œç»„ä»¶çš„DOMè¡¨ç°å½¢å¼ä¹Ÿå°†å‘ç”Ÿç›¸åº”çš„å˜åŒ–ã€‚</p>

<p>Reactä¸ºç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå„ä¸ªæ—¶å€™æä¾›ç›¸åº”çš„æ–¹æ³•æ¥å“åº”ä¸åŒçš„æ—¶åˆ»çš„å˜åŒ–ã€‚ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªçŠ¶æ€ï¼šåˆ›å»ºæœŸã€å­˜åœ¨æœŸã€é”€æ¯æœŸã€‚</p>

<p><img src="/uploads/users/1/images/1508231631368.png" style="width:100%" /></p>

<p>é‚£ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•æœ‰ä»¥ä¸‹è¿™äº›ï¼š</p>

<ul>
	<li><strong>componentWillMount&nbsp;</strong>åœ¨æ¸²æŸ“å‰è°ƒç”¨ï¼ŒæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ˜¯å¦‚æ­¤ã€‚</li>
	<li><strong>componentDidMount&nbsp;</strong>åœ¨æ¸²æŸ“å®Œåè°ƒç”¨ï¼Œå³åœ¨renderæ–¹æ³•è°ƒç”¨å®Œä¹‹åä¾¿ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•åªä¼šåœ¨å®¢æˆ·ç«¯ä¼šè°ƒç”¨ï¼ŒæœåŠ¡ç«¯åˆ™ä¸ä¼šè°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡ŒAJAXè¯·æ±‚æˆ–è€…DOMæ“ä½œã€‚å¦‚æœä½ æƒ³å’Œå…¶ä»–JavaScriptæ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è°ƒç”¨setTimeout, setIntervalæˆ–è€…å‘é€AJAXè¯·æ±‚ç­‰æ“ä½œ(é˜²æ­¢å¼‚éƒ¨æ“ä½œé˜»å¡UI)ã€‚</li>
	<li><strong>componentWillReceiveProps</strong>&nbsp;åœ¨ç»„ä»¶æ¥æ”¶æ–°çš„propsæ—¶ï¼Œåœ¨è¿›è¡Œæ–°çš„ä¸€æ¬¡æ¸²æŸ“è°ƒç”¨renderæ–¹æ³•ä¹‹å‰ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ä½†è¿™ä¸ªæ–¹æ³•åœ¨åˆå§‹åŒ–æ—¶ï¼ˆç¬¬ä¸€æ¬¡è°ƒç”¨readerï¼‰ï¼Ÿä¸ä¼šè°ƒç”¨ã€‚</li>
	<li><strong>shouldComponentUpdate&nbsp;</strong>è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç»„ä»¶æ˜¯å¦éœ€è¦åšä¸€æ¬¡æ–°çš„æ¸²æŸ“ï¼Œç»„ä»¶åœ¨æ¥æ”¶æ–°çš„propsæˆ–è€…stateåï¼Œä¼šè§¦å‘è¯¥æ–¹æ³•ã€‚é»˜è®¤è¿”å›æ˜¯trueï¼Œæ‰€ä»¥æˆ‘ä»¬åšç»„ä»¶ä¼˜åŒ–çš„æ—¶å€™ï¼Œç»å¸¸ä¼šåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢åšä¸€äº›å¤„ç†ï¼Œé€šå¸¸åˆ¤æ–­propsæˆ–è€…stateçš„å€¼æ˜¯å¦å‘ç”Ÿæ”¹å˜ç„¶æŒ‡ç¤ºç»„ä»¶æ˜¯å¦éœ€è¦é‡æ–°è°ƒç”¨renderæ–¹æ³•é‡æ–°æ¸²æŸ“ã€‚</li>
	<li><strong>componentWillUpdate&nbsp;</strong>åœ¨ç»„ä»¶åœ¨æ¥æ”¶æ–°çš„propsæˆ–è€…stateä¹‹åï¼Œè°ƒç”¨renderæ–¹æ³•ä¹‹å‰ï¼Œä¼šè¢«è°ƒç”¨ã€‚ä½†æ˜¯åœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
	<li><strong>componentDidUpdate&nbsp;</strong>åœ¨ç»„ä»¶å®Œæˆæ›´æ–°åä¼šè°ƒç”¨ï¼Œåœ¨åˆå§‹åŒ–æ—¶ä¸ä¼šè°ƒç”¨ã€‚</li>
	<li><strong>componentWillUnmount&nbsp;</strong>åœ¨ç»„ä»¶ä»DOMä¸­ç§»é™¤æ—¶ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚</li>
</ul>

<p>å¦‚ä¸‹æ —å­ğŸŒ°å±•ç¤ºäº†æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œæƒ…å†µï¼š</p>

<h3>App.jsx</h3>

<pre>
import React from &#39;react&#39;;

class App extends React.Component {

   constructor(props) {
      super(props);
		
      this.state = {
         data: 0
      }

      this.setNewNumber = this.setNewNumber.bind(this)
   };

   setNewNumber() {
      this.setState({data: this.state.data + 1})
   }

   render() {
      return (
         &lt;div&gt;
            &lt;button onClick = {this.setNewNumber}&gt;INCREMENT&lt;/button&gt;
            &lt;Content myNumber = {this.state.data}&gt;&lt;/Content&gt;
         &lt;/div&gt;
      );
   }
}

class Content extends React.Component {

   componentWillMount() {
      console.log(&#39;Component WILL MOUNT!&#39;)
   }

   componentDidMount() {
      console.log(&#39;Component DID MOUNT!&#39;)
   }

   componentWillReceiveProps(newProps) {    
      console.log(&#39;Component WILL RECIEVE PROPS!&#39;)
   }

   shouldComponentUpdate(newProps, newState) {
      return true;
   }

   componentWillUpdate(nextProps, nextState) {
      console.log(&#39;Component WILL UPDATE!&#39;);
   }

   componentDidUpdate(prevProps, prevState) {
      console.log(&#39;Component DID UPDATE!&#39;)
   }

   componentWillUnmount() {
      console.log(&#39;Component WILL UNMOUNT!&#39;)
   }
	
   render() {
      return (
         &lt;div&gt;
            &lt;h3&gt;{this.props.myNumber}&lt;/h3&gt;
         &lt;/div&gt;
      );
   }
}

export default App;</pre>

<h3>main.js</h3>

<pre>
import React from &#39;react&#39;;
import ReactDOM from &#39;react-dom&#39;;
import App from &#39;./App.jsx&#39;;

ReactDOM.render(&lt;App/&gt;, document.getElementById(&#39;app&#39;));

setTimeout(() =&gt; {
   ReactDOM.unmountComponentAtNode(document.getElementById(&#39;app&#39;));}, 10000);</pre>

<p>åœ¨ç¨‹åºæ¸²æŸ“å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>

<p><img src="/uploads/users/1/images/1508234433283.png" style="width:100%" /></p>

<p>åœ¨è¾“å‡ºé‡Œæˆ‘ä»¬ä¹Ÿåªçœ‹åˆ°<strong>componentWillMount</strong>å’Œ<strong>componentDidMount</strong>æ–¹æ³•ï¼š</p>

<p><img src="/uploads/users/1/images/1508234526744.png" style="width:100%" /></p>

<p>æˆ‘ä»¬ç‚¹å‡»è¿™ä¸ª<strong>INCREMENT</strong>æŒ‰é’®ï¼Œè¿™æ—¶å€™ä¼šæ›´æ–°ç»„ä»¶ï¼Œå¹¶å‡ºå‘ç”Ÿå‘½å‘¨æœŸå¯¹åº”çš„æ–¹æ³•ï¼š</p>

<p><img src="/uploads/users/1/images/1508234676740.png" style="width:100%" /></p>

<p>10ç§’è¿‡åï¼Œè¿™ä¸ªç»„ä»¶è¢«ç§»é™¤äº†ï¼Œåˆ™ä¼šè§¦å‘<strong>componentWillUnmount</strong>æ–¹æ³•ï¼š</p>

<p><img src="/uploads/users/1/images/1508234784086.png" style="width:100%" /></p>

<p>æ‰€ä»¥ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å„ä¸ªæ–¹æ³•ä¼šåœ¨ç‰¹å®šçš„æ—¶å€™æŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ‰§è¡Œã€‚æ ¹æ®è‡ªå·±çš„éœ€è¦æŒ‰ç…§è§„èŒƒä½¿ç”¨ï¼Œå¯ä»¥é¿å…å¾ˆå¤šé—®é¢˜</p>
</div>
    {% endraw %}
  </div>

  <div class="discuss-wrapper">
    {% include discussTitle.html info=page %}
    {% raw %}
    <div class="discuss-item">
        <div class="discuss-parent">
          <div class="discuss-meta">
            <span class="discuss-user">æœ¨å¿ƒ</span>
            <span class="discuss-time">2017.10.17</span>
          </div>
          <div class="discuss-comment"> åŠ æ²¹ğŸ’ª</div>
        </div>
        
      </div>
    {% endraw %}
  </div>
<div>
